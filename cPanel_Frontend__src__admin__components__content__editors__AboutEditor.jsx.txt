import React from "react";

const AboutEditor = ({ content, onContentChange }) => {
  const handleTextChange = (e) => {
    const { name, value } = e.target;
    onContentChange({ ...content, [name]: value });
  };

  const handleValueChange = (index, field, value) => {
    const newValues = content.values ? [...content.values] : [];
    if (!newValues[index]) newValues[index] = {};
    newValues[index][field] = value;
    onContentChange({ ...content, values: newValues });
  };

  const handleStatChange = (index, field, value) => {
    // Ensure we maintain a fixed size of 4 stats for layout consistency
    const newStats = content.stats ? [...content.stats] : [{}, {}, {}, {}];
    if (!newStats[index]) newStats[index] = {};
    newStats[index][field] = value;
    onContentChange({ ...content, stats: newStats });
  };

  const inputClass = "w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 transition-colors";
  const labelClass = "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1";
  const sectionClass = "p-5 border border-gray-200 dark:border-gray-700 rounded-xl bg-gray-50 dark:bg-gray-700/30 space-y-4";
  const headingClass = "font-bold text-lg text-gray-900 dark:text-white mb-2";

  // --- GHOST CONTENT CONFIGURATION (Matched to Screenshot) ---
  
  const statsConfig = [
      { label: "PREMIUM TOOLS", value: "20+", desc: "Former financial analyst with 15+ years experience in fintech." },
      { label: "ACTIVE USERS", value: "500K+", desc: "Computer science PhD with expertise in algorithm optimization." },
      { label: "ACCURACY RATE", value: "99.9%", desc: "Award-winning UX designer focused on creating intuitive interfaces." },
      { label: "USER RATING", value: "4.9/5", desc: "Certified financial planner ensuring calculation accuracy." }
  ];

  const valuesConfig = [
      { title: "Institutional Accuracy", desc: "Every formula is rigorously tested and validated by industry experts to ensure bank-level precision in every result." },
      { title: "Visual Intelligence", desc: "We transform complex datasets into intuitive visual stories, making high-level math approachable for everyone." },
      { title: "Privacy by Design", desc: "Your data is yours alone. We implement high-level encryption to ensure your calculation history remains private and secure." }
  ];

  return (
    <div className="space-y-6">
      
      {/* 1. Hero Section */}
      <div className={sectionClass}>
        <h3 className={headingClass}>Hero Section</h3>
        <div>
          <label className={labelClass}>Main Heading</label>
          <input
            type="text"
            name="mainHeading"
            value={content.mainHeading || ""}
            onChange={handleTextChange}
            className={inputClass}
            placeholder="About Calculox"
          />
        </div>
        <div>
          <label className={labelClass}>Subheading</label>
          <textarea
            name="subHeading"
            value={content.subHeading || ""}
            onChange={handleTextChange}
            rows="3"
            className={inputClass}
            placeholder="Empowering through precision. Making professional-grade calculations accessible to everyone."
          />
        </div>
      </div>

      {/* 2. Mission Section */}
      <div className={sectionClass}>
        <h3 className={headingClass}>Mission Section</h3>
        <div>
          <label className={labelClass}>Mission Badge</label>
          <input
            type="text"
            name="missionHeading" // Maps to Badge in Frontend
            value={content.missionHeading || ""}
            onChange={handleTextChange}
            className={inputClass}
            placeholder="OUR MISSION"
          />
        </div>
        <div>
          <label className={labelClass}>Mission Heading</label>
          {/* Note: In frontend this maps to the big H2 "Calculations Built on Trust" */}
          <input
             type="text"
             name="missionTitle" // New field for the big title if needed, or reuse specific logic
             value={content.missionTitle || ""}
             onChange={handleTextChange}
             className={inputClass}
             placeholder="Calculations Built on Trust"
          />
        </div>
        <div>
          <label className={labelClass}>Mission Paragraph</label>
          <textarea
            name="missionParagraph1"
            value={content.missionParagraph1 || ""}
            onChange={handleTextChange}
            rows="4"
            className={inputClass}
            placeholder="At Calculox, we believe that professional-grade calculation tools should be accessible to everyone. Our mission is to empower individuals and businesses with accurate, reliable, and easy-to-use calculators that help them make informed decisions."
          />
        </div>
      </div>

      {/* 3. Stats Section */}
      <div className={sectionClass}>
        <h3 className={headingClass}>Stats Section</h3>
        <p className="text-xs text-gray-500 mb-4">Configure the key statistics displayed below the mission statement.</p>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            {statsConfig.map((placeholder, index) => {
                const stat = (content.stats && content.stats[index]) ? content.stats[index] : {};
                return (
                    <div key={index} className="space-y-2 p-3 border border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800">
                        <label className="text-xs font-bold text-gray-500 dark:text-gray-400 uppercase">Stat {index + 1}</label>
                        <input
                            type="text"
                            value={stat.value || ""}
                            onChange={(e) => handleStatChange(index, "value", e.target.value)}
                            placeholder={placeholder.value}
                            className={inputClass}
                        />
                        <input
                            type="text"
                            value={stat.label || ""}
                            onChange={(e) => handleStatChange(index, "label", e.target.value)}
                            placeholder={placeholder.label}
                            className={inputClass}
                        />
                        <textarea
                            value={stat.desc || ""}
                            onChange={(e) => handleStatChange(index, "desc", e.target.value)}
                            placeholder={placeholder.desc}
                            rows="3"
                            className={`text-xs ${inputClass}`}
                        />
                    </div>
                );
            })}
        </div>
      </div>

      {/* 4. Core Principles (Values) Section */}
      <div className={sectionClass}>
        <h3 className={headingClass}>Core Principles</h3>
        <div>
          <label className={labelClass}>Section Badge</label>
          <input
            type="text"
            name="valuesHeading" // Maps to Badge
            value={content.valuesHeading || ""}
            onChange={handleTextChange}
            className={inputClass}
            placeholder="OUR CORE PRINCIPLES"
          />
        </div>
         <div>
          <label className={labelClass}>Section Heading</label>
          <input
            type="text"
            name="valuesTitle" // Maps to Main Title
            value={content.valuesTitle || ""}
            onChange={handleTextChange}
            className={inputClass}
            placeholder="Built on Uncompromising Principles"
          />
        </div>
        <div>
          <label className={labelClass}>Section Subheading</label>
          <textarea
            name="valuesSubheading"
            value={content.valuesSubheading || ""}
            onChange={handleTextChange}
            rows="2"
            className={inputClass}
            placeholder="These principles guide everything we do, from engineering our formulas to designing our interfaces."
          />
        </div>
        
        {/* Dynamic Cards Input Loop */}
        <div className="space-y-4 pt-4 border-t border-gray-100 dark:border-gray-700 mt-2">
            <h4 className="text-xs font-bold text-gray-500 uppercase tracking-wider">Principle Cards</h4>
            {valuesConfig.map((placeholder, index) => {
                // Safely access current state value if it exists
                const valueItem = (content.values && content.values[index]) ? content.values[index] : {};
                
                return (
                    <div key={index} className="pl-4 border-l-2 border-indigo-200 dark:border-indigo-800 space-y-2">
                        <label className="text-xs font-bold text-gray-500 dark:text-gray-400 uppercase">
                           Card {index + 1}
                        </label>
                        <input
                            type="text"
                            value={valueItem.title || ""}
                            onChange={(e) => handleValueChange(index, "title", e.target.value)}
                            placeholder={placeholder.title}
                            className={inputClass}
                        />
                        <textarea
                            value={valueItem.description || ""}
                            onChange={(e) => handleValueChange(index, "description", e.target.value)}
                            placeholder={placeholder.desc}
                            rows="2"
                            className={inputClass}
                        />
                    </div>
                );
            })}
        </div>
      </div>

      {/* 5. Final CTA Section */}
      <div className={sectionClass}>
        <h3 className={headingClass}>Final CTA Section</h3>
        <div>
          <label className={labelClass}>Badge</label>
          <input
            type="text"
            name="ctaBadge"
            value={content.ctaBadge || ""}
            onChange={handleTextChange}
            className={inputClass}
            placeholder="START YOUR JOURNEY"
          />
        </div>
        <div>
          <label className={labelClass}>CTA Heading</label>
          <textarea
            name="ctaHeading"
            value={content.ctaHeading || ""}
            onChange={handleTextChange}
            rows="2"
            className={inputClass}
            placeholder="Join the Professional Network of Accurate Intelligence"
          />
        </div>
        <div>
          <label className={labelClass}>CTA Subheading</label>
          <textarea
            name="ctaSubheading"
            value={content.ctaSubheading || ""}
            onChange={handleTextChange}
            rows="3"
            className={inputClass}
            placeholder="Experience institutional-grade precision for your daily calculations. Trusted by over 500,000 professionals worldwide for critical decision making."
          />
        </div>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
             <div>
                <label className={labelClass}>Primary Button</label>
                <input
                    type="text"
                    name="ctaBtnPrimary"
                    value={content.ctaBtnPrimary || ""}
                    onChange={handleTextChange}
                    className={inputClass}
                    placeholder="Explore Calculators"
                />
             </div>
             <div>
                <label className={labelClass}>Secondary Button</label>
                <input
                    type="text"
                    name="ctaBtnSecondary"
                    value={content.ctaBtnSecondary || ""}
                    onChange={handleTextChange}
                    className={inputClass}
                    placeholder="Go to Dashboard"
                />
             </div>
        </div>
      </div>
    </div>
  );
};

export default AboutEditor;